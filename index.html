<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="./lib/leaflet-measure.css">
    <link rel="stylesheet" href="./lib/MarkerCluster.css">
    <link rel="stylesheet" href="./lib/MarkerCluster.Default.css">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous"></script>
    <script src="./lib/leaflet.browser.print.min.js"></script>
    <script src="./lib/leaflet-measure.js"></script>
    <script src="./lib/leaflet.markercluster.js"></script>
    <script src="test.js"></script>

    <link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />
    <script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>
 
    <title>Leaflet Geoproject</title>
    <style>
    #map {
        width: 100%;
        height: 700px;
    }

    </style>

</head>
<body>
    <div id="map"></div>
    <button onclick=fullScreenView()> View in full screen</button>
    <div class="coordinate"></div>
    <button class="print-map">Print Map</button>
    <button class="zoom-to-layer">Zoom to layer</button>
    <script>
        var map = L.map('map').setView([36.505, 42.5], 7);
        //add zoom control
        map.zoomControl.setPosition('topright');


        var osm =L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);




        
        var singleMarker=L.marker([36.505, 42.5])
            .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
            .openPopup();

        //add mapt scale

        //L.control.scale({position:'bottomright'}).addTo(map)
        L.control.scale().addTo(map)

        //full screen function
        var mapID=document.getElementById("map");
        function fullScreenView() {
            mapID.requestFullscreen()
        }

        //map coordinate display
        map.on('mousemove',function(e){
            //console.log(e)
            // select class="coordinate" div from first div
            $('.coordinate').html(`Lat: ${e.latlng.lat} Lon: ${e.latlng.lng}`)
        })

        // add print
        //https://github.com/Igor-Vladyka/leaflet.browser.print
        $('.print-map').click(function(){
            window.print();
        })

        L.control.browserPrint().addTo(map);

        //add  leaflet measurement
        L.control.measure({ primaryLengthUnit: 'kilometers', 
        secondaryLengthUnit: 'meters' ,
        primaryAreaUnit: 'hectares',
        secondaryAreaUnit: 'sqmeters'
    }).addTo(map)

    //add sample geojson to map
    //https://github.com/Leaflet/Leaflet.markercluster#examples
    var marker = L.markerClusterGroup();
    var dogu =L.geoJSON(data, {
        onEachFeature: function(feature,layer) {
            layer.bindPopup(feature.properties.name)
        }
    });
    dogu.addTo(marker)
    //marker.addTo(map)

    //geocoder
    //https://github.com/Leaflet/Leaflet.markercluster#examples
    L.Control.geocoder().addTo(map);
    
    //with layer control plugin
    //https://leaflet-extras.github.io/leaflet-providers/preview/
    var Stadia_AlidadeSmoothDark = L.tileLayer('https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png', {
        maxZoom: 20,
        attribution: '&copy; <a href="https://stadiamaps.com/">Stadia Maps</a>, &copy; <a href="https://openmaptiles.org/">OpenMapTiles</a> &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors'
    });


    var baseMaps={
        'OSM':osm,
        'StadiaDark':Stadia_AlidadeSmoothDark
    }
    // burasi harita uzerinden layer panele eklemek istedidigmiz ek verileri tanimaladigimiz bolge
    var overlayerMaps= {
        'GeoJSON Markers':marker,
        'Single Marker' : singleMarker
    }
    L.control.layers(baseMaps,overlayerMaps).addTo(map);

    // add to zoom to layer function
    // ileride bunu her layer in yanina buton olarak ekleyelim
    // # iler jquery ile 'classname' ait butonun ne yapacagini belirliyoruz
    $('.zoom-to-layer').click(function(){
        map.setView([36.505, 42.5], 7)
    })

    </script>
    
</body>
</html>

